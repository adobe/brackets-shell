
## Overview
This readme describes how the .dmg file is created for Brackets on Mac. Like many Mac apps Brackets doesn't have an installer. Instead the user opens a disk image file (.dmg) and manually drags Brackets.app to their Applications folder.

## To create a Brackets dmg
1) Install DropDMG (http://c-command.com/dropdmg/)
2) Set up the payload for the dmg by copying Brackets.app to brackets-shell\installer\mac\staging\
    Note, scripts and instructions for how to build Brackets.app for a dmg image are coming soon.
3) Open brackets-shell\installer\mac\buildInstaller.sh in a text editor and update "releaseName" variable at the top of the file
4) Execute the script buildInstaller.sh from brackets-shell\installer\mac\
    A new dmg file will be created at brackets-shell\installer\mac\


## How it Works
- DropDMG provides both a GUI and command line interface for building Mac dmg files. See http://c-command.com/dropdmg/. Brackets uses the shell script interface to control DropDMG. Using the command line instead of the GUI allows build settings to be stored as text and tracked in the brackets-shell git repo.

- buildInstaller.sh sets up some configuration variables regarding the name of the release, creates a temporary directory for the build and then makes a single call to dropdmg to create the dmg. All the options used to build the disk image are specified via command arguments except the layout for the disk image. The layout is described via the brackets-shell\installer\mac\dropDmgConfig\layouts\bracketsLayout folder. This folder contains an Info.plist file, icons, and background image that DropDMG uses to layout the appearance of the disk image. This layout folder is generated by the DropDMG GUI tool. Dragging a layout from DropDMG to the tool creates this folder structure.

## Issues
The Info.plist references file names using a name and a hash and specifies their icon location. Since Brackets updates the app name with each sprint, the Info.plist needs to handle each sprint name. Since it's currently not known how to templatize the Info.plist for DropDMG the current Info.plist file has sprints 13-20 already specified so layouts will work correctly up to sprint 20.